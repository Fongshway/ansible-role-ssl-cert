# Defines the cfssl profile to use: one of server,client,peer,intermediate
ssl_cert_type: server

# Filename used to store the certificate
ssl_cert_name: ansible

# Common name to use for the generated certificate
ssl_cert_common_name: "{{ ssl_cert_name }}"

# Hosts to be included as IP/DNS SAN entries
ssl_cert_hosts:
  - "{{ ssl_cert_common_name }}"

# Location to store keys, csrs, certificates
ssl_cert_base_dir: /etc/pki/{{ 'ansible-ca' if ssl_cert_type == 'intermediate' else 'ansible-ssl-certs' }}

# Derived fully qualified file names
ssl_cert_file: "{{ ssl_cert_base_dir }}/{{ ssl_cert_name }}.pem"
ssl_cert_key_file: "{{ ssl_cert_base_dir }}/{{ ssl_cert_name }}-key.pem"
ssl_cert_csr_json_file: "{{ ssl_cert_base_dir }}/{{ ssl_cert_name }}-csr.json"
ssl_cert_csr_file: "{{ ssl_cert_base_dir }}/{{ ssl_cert_name}}.csr"
ssl_cert_chain_file: "{{ ssl_cert_base_dir }}/{{ ssl_cert_name }}-chain.pem"

# Information to store in the certificate
ssl_cert_country: GB
ssl_cert_city: London
ssl_cert_state: Greater London
ssl_cert_organization_name: Ansible Certificate
ssl_cert_organizational_unit_name: Certificate

# The delegate host holding the CA key to sign the certificate
ssl_cert_ca_delegate: "{{ groups['root_ca_nodes' if ssl_cert_type == 'intermediate' else 'intermediate_ca_nodes'][0] }}"

# The base directory on the delegate host containing signing key, certificate
ssl_cert_ca_delegate_base_dir: /etc/pki/ansible-ca

# Location of the signing key and certificate on the delegate host
ssl_cert_ca_delegate_name: "{{ 'ca' if ssl_cert_type == 'intermediate' else 'intermediate' }}"
ssl_cert_ca_delegate_key: "{{ ssl_cert_ca_delegate_name }}-key.pem"
ssl_cert_ca_delegate_cert: "{{ ssl_cert_ca_delegate_name }}.pem"
ssl_cert_ca_delegate_chain: "{{ ssl_cert_ca_delegate_name }}-chain.pem"
